(()=>{var e={};e.id=391,e.ids=[391],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},84747:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var r=s(70260),a=s(28203),i=s(25155),l=s.n(i),n=s(67292),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["create-test",{children:["[test]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,18207)),"C:\\Users\\Student\\Downloads\\kvfNew\\kvfNew\\app\\create-test\\[test]\\page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],types:["__DEFAULT__",{},{defaultPage:[()=>Promise.resolve().then(s.t.bind(s,97507,23)),"next/dist/client/components/parallel-route-default.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,19611)),"C:\\Users\\Student\\Downloads\\kvfNew\\kvfNew\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,61129)),"C:\\Users\\Student\\Downloads\\kvfNew\\kvfNew\\app\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\Student\\Downloads\\kvfNew\\kvfNew\\app\\create-test\\[test]\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/create-test/[test]/page",pathname:"/create-test/[test]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},23720:(e,t,s)=>{Promise.resolve().then(s.bind(s,18207))},87272:(e,t,s)=>{Promise.resolve().then(s.bind(s,50871))},50871:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(45512),a=s(58009),i=s(87021),l=s(25409),n=s(47699),o=s(59462);let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("textarea",{className:(0,o.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));d.displayName="Textarea";var c=s(74482),u=s(79334),p=s(26248);p.callServer,p.findSourceMapURL;let m=(0,p.createServerReference)("6076c6b25c6da18b09f5ffbfbd7d8fba9d44a4b8f7",p.callServer,void 0,p.findSourceMapURL,"saveCompletedTest"),f=e=>{let[t,s]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.p,{type:"file",accept:"image/*",onChange:async t=>{let r=t.target.files?.item(0);if(!r)return;if(r.size>5242880)return s(!0);s(!1);let a=await fetch(`/api/upload-test-image/${e.testId}`,{method:"post",headers:{"Content-Type":r.type},body:Buffer.from(await r.arrayBuffer())});if(200!=a.status)return;let i=await a.json();i.url&&e.onChange(i.url)}}),(0,r.jsx)("span",{style:{color:"red",display:t?"block":"none"},children:"Размер файла больше чем пашел нахуй"})]})};function x(){let e=(0,u.useParams)().test;console.log(typeof e);let[t,s]=(0,a.useState)([]),[o,p]=(0,a.useState)(""),[x,h]=(0,a.useState)(["",""]),[v,b]=(0,a.useState)(0),[g,j]=(0,a.useState)(0),[w,N]=(0,a.useState)(""),y=e=>{let t=x.filter((t,s)=>s!==e);h(t),v>=t.length&&b(t.length-1)},C=e=>{(""===o.trim()||x.filter(e=>""!==e.trim()).length<2)&&console.log(e),e>=0?(t.splice(e+1,0,{question:o,options:x.filter(e=>""!==e.trim()),correctAnswer:v,questionScore:g,image:w}),s(t),console.log(t)):s([...t,{question:o,options:x.filter(e=>""!==e.trim()),correctAnswer:v,questionScore:g,image:w}]),p(""),h(["",""]),b(0),N(""),console.log(o)},q=async()=>{await m(Number(e),t).then(()=>{alert("Тест сохранен")})};return(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Конструктор теста"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(n.J,{htmlFor:"question",children:"Вопрос"}),(0,r.jsx)(d,{id:"question",value:o,onChange:e=>p(e.target.value),className:"mt-1"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(l.p,{onChange:e=>{j(e.target.value)},className:"flex-grow",type:"number",placeholder:`Сколько баллов даётся за задание`}),(0,r.jsx)(n.J,{children:"Приложить картинку"}),(0,r.jsx)(f,{testId:e,onChange:N}),(0,r.jsx)(n.J,{children:"Варианты ответов"}),x.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center mt-1",children:[(0,r.jsx)(l.p,{value:e,onChange:e=>{let s=[...x];s[t]=e.target.value,h(s),console.log(s)},className:"flex-grow",placeholder:`Вариант ${t+1}`}),(0,r.jsx)(i.$,{onClick:()=>y(t),variant:"destructive",className:"ml-2",disabled:x.length<=2,children:"Удалить"})]},t)),(0,r.jsx)(i.$,{onClick:()=>{h([...x,""])},className:"mt-2",children:"Добавить вариант"})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)(n.J,{children:"Правильный ответ"}),(0,r.jsx)(c.z,{value:v.toString(),onValueChange:e=>b(parseInt(e)),children:x.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.C,{value:t.toString(),id:`option-${t}`}),(0,r.jsx)(n.J,{htmlFor:`option-${t}`,children:`Вариант ${t+1}`})]},t))})]}),(0,r.jsx)(i.$,{onClick:C,className:"mb-4",children:"Добавить вопрос"}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Текущий тест"}),t.map((e,a)=>(0,r.jsxs)("div",{className:"relative p-7 pb-2 pt-6 container mx-auto flex h-full ring-black/5 max-lg:rounded-t-[2rem] my-6 py-10  shadow ring-1 flex-col overflow-hidden rounded-[calc(theme(borderRadius.lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]",children:[(0,r.jsxs)("p",{children:[(0,r.jsxs)("strong",{children:["В",a+1,":"]})," ",e.question]}),(0,r.jsx)("ul",{className:"list-disc pl-5",children:e.options.map((t,s)=>(0,r.jsxs)("li",{className:s===e.correctAnswer?"font-bold":"",children:[t," ",s===e.correctAnswer&&"(Правильный ответ)"," "]},s))}),(0,r.jsxs)("div",{children:["Колличество баллов:",e.questionScore]}),(0,r.jsxs)("div",{children:["Картинка:",e.image]}),(0,r.jsxs)("div",{className:"flex mt-6",children:[(0,r.jsx)(i.$,{onClick:()=>C(Number(a)),className:" mr-4 mb-4",children:"Добавить вопрос после этого вопроса"}),(0,r.jsx)(i.$,{onClick:()=>{var e;console.log(e=Number(a)),t.splice(e,1),s(t),p(""),h(["",""]),b(0),j(0),N("")},className:" mb-4",children:"Удалить вопрос"})]})]},a))]}),(0,r.jsx)(i.$,{onClick:q,children:"Сохранить тест"})]})}},25409:(e,t,s)=>{"use strict";s.d(t,{p:()=>l});var r=s(45512),a=s(58009),i=s(59462);let l=a.forwardRef(({className:e,type:t,...s},a)=>(0,r.jsx)("input",{type:t,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...s}));l.displayName="Input"},74482:(e,t,s)=>{"use strict";s.d(t,{C:()=>d,z:()=>o});var r=s(45512),a=s(58009),i=s(94061),l=s(63689),n=s(59462);let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.bL,{className:(0,n.cn)("grid gap-2",e),...t,ref:s}));o.displayName=i.bL.displayName;let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.q7,{ref:s,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:(0,r.jsx)(i.C1,{className:"flex  items-center justify-center",children:(0,r.jsx)(l.A,{className:"h-3.5 w-3.5 fill-primary"})})}));d.displayName=i.q7.displayName},18207:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Student\\\\Downloads\\\\kvfNew\\\\kvfNew\\\\app\\\\create-test\\\\[test]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Student\\Downloads\\kvfNew\\kvfNew\\app\\create-test\\[test]\\page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[989,934,835,750,613,117,599],()=>s(84747));module.exports=r})();