"use strict";exports.id=226,exports.ids=[226],exports.modules={8386:(e,a,t)=>{t.r(a),t.d(a,{"0073f5af6c1f6ac2579605cfb8d6b91f63e67bd6b0":()=>r.q,"0094d3046b96488141886298814fd70eb4743d5a50":()=>N,"00e98ca86f23c7d86b4de2de658c5682e1cebadae0":()=>f,"00fff6886cf8305264868ff151d9c8b9b52f90be4e":()=>l,"4011922557660c392d56e64daf339b86e4eebbcec7":()=>p,"401717914d5a16ce8635f6ea44e1212d6d2c7d3e05":()=>d,"4049cb5a55d9f00e37b06224b35e194298862b7368":()=>m,"4057d50ba7f574ca4cf249db64cb11d433b9d8e6f4":()=>c,"406a511f9f3af22edff801a8f98c08a31dfa554816":()=>b,"406a727a79373cace5068c19685c15df4d7f5e20fe":()=>g,"4070009e044686020329e3b8cd17c8bcaf3b61dc92":()=>w,"4077a005e744767b30593310e66db752dbae5a41f9":()=>o,"40a511ee6b9ab36d09f8a74b56fee2b8191bc339e3":()=>u,"40b6cbbbfecaa509aab23f5d814a27f8e807325d37":()=>h,"604ead747fdbbc39b22d3a27265a4f6f5461fd2248":()=>y,"60cbae570723b9aa85f8042c3464b764b39e619deb":()=>v,"70947a5b5b8fa09282460237061ca18dba05135380":()=>z});var r=t(40530),s=t(21590);t(70376);var n=t(70709),i=t(8805);async function c(e){try{if(await n.z.user.findFirst({where:{email:e.email}}))return{success:!1};return{success:!!await n.z.user.create({data:{firstName:e.firstName,lastName:e.lastName,surName:e.surName,email:e.email,password:(0,i.hashSync)(e.password,10),startTest:e.startTest,organisation:e.organisation,role:e.role,okAnswers:0,testsResult:"[]"}})}}catch(e){return console.log(e),{success:!1}}}async function d(e){try{return await n.z.user.update({where:{id:e.id},data:{firstName:e.firstName,lastName:e.lastName,email:e.email}}),{edit:!0}}catch(e){return console.error(e),{edit:!1}}}async function l(){try{return await n.z.user.findMany({where:{role:{in:["SCHOOLBOY","STUDENT","SPECIALIST"]}},select:{id:!0,firstName:!0,lastName:!0,surName:!0,email:!0,organisation:!0,role:!0,startTest:!0,testPassed:!0,passedDate:!0,testsResult:!0,okAnswers:!0}})}catch(e){return console.log(e),[]}}async function o(e){try{return await n.z.test.create({data:{category:e.category,name:e.name,nameTranslit:function(e){let a={а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"e",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"h",ц:"c",ч:"ch",ш:"sh",щ:"sch",ь:"",ы:"y",ъ:"",э:"e",ю:"yu",я:"ya"};e=e.toLowerCase();let t="";for(let r=0;r<e.length;++r)void 0==a[e[r]]?t+=e[r]:t+=a[e[r]];return t=(t=(t=t.replace(/[^-0-9a-z]/g,"-")).replace(/[-]+/g,"-")).replace(/^\-|-$/g,"")}(e.name),text:"[]"}})}catch(e){return e}}async function f(){try{return await n.z.test.findMany({select:{id:!0,name:!0,nameTranslit:!0,category:!0,testDisable:!0}})}catch(e){return console.log(e),[]}}async function u(e){await n.z.test.delete({where:{id:e}})}async function b(e){let a=await n.z.test.findFirst({where:{id:e},select:{testDisable:!0}});console.log(a),a?.testDisable==!0?await n.z.test.update({where:{id:e},data:{testDisable:!1}}):await n.z.test.update({where:{id:e},data:{testDisable:!0}})}async function m(e){try{return await n.z.test.findUnique({where:{id:e}})}catch(e){return console.log(e),[]}}async function y(e,a){try{return await n.z.test.update({where:{id:e},data:{text:JSON.stringify(a)}})}catch(e){return console.log(e),e}}async function w(e){try{return await n.z.test.findUnique({where:{id:e},select:{name:!0}})}catch(e){return console.log(e),[]}}async function h(e){try{return await n.z.test.findUnique({where:{id:e},select:{text:!0}})}catch(e){return console.log(e),[]}}async function g(e){try{return await n.z.test.findMany({where:{category:{in:[e]}},select:{id:!0}})}catch(e){return console.log(e),[]}}async function p(e){try{return await n.z.test.findFirst({where:{nameTranslit:e},select:{name:!0,text:!0}})}catch(e){return console.log(e),e}}async function v(e,a){try{let t=await n.z.user.update({where:{id:e},data:{testPassed:!0,testsResult:a}});return console.log(t),t}catch(e){console.log(e)}}async function z(e,a,t){try{let r=await n.z.user.update({where:{id:e},data:{testPassed:!0,okAnswers:a,passedDate:t}});return console.log(r),r}catch(e){console.log(e)}}async function N(){try{return await n.z.user.findMany({where:{role:{in:["SCHOOLBOY","STUDENT","SPECIALIST"]}},select:{id:!0,firstName:!0,lastName:!0,surName:!0,email:!0,organisation:!0,testPassed:!0,startTest:!0,passedDate:!0,role:!0,testsResult:!0}})}catch(e){throw console.error("Ошибка:",e),Error("Ошибка при получении данных пользователей")}}(0,t(99344).D)([c,d,l,o,f,u,b,m,y,w,h,g,p,v,z,N]),(0,s.A)(c,"4057d50ba7f574ca4cf249db64cb11d433b9d8e6f4",null),(0,s.A)(d,"401717914d5a16ce8635f6ea44e1212d6d2c7d3e05",null),(0,s.A)(l,"00fff6886cf8305264868ff151d9c8b9b52f90be4e",null),(0,s.A)(o,"4077a005e744767b30593310e66db752dbae5a41f9",null),(0,s.A)(f,"00e98ca86f23c7d86b4de2de658c5682e1cebadae0",null),(0,s.A)(u,"40a511ee6b9ab36d09f8a74b56fee2b8191bc339e3",null),(0,s.A)(b,"406a511f9f3af22edff801a8f98c08a31dfa554816",null),(0,s.A)(m,"4049cb5a55d9f00e37b06224b35e194298862b7368",null),(0,s.A)(y,"604ead747fdbbc39b22d3a27265a4f6f5461fd2248",null),(0,s.A)(w,"4070009e044686020329e3b8cd17c8bcaf3b61dc92",null),(0,s.A)(h,"40b6cbbbfecaa509aab23f5d814a27f8e807325d37",null),(0,s.A)(g,"406a727a79373cace5068c19685c15df4d7f5e20fe",null),(0,s.A)(p,"4011922557660c392d56e64daf339b86e4eebbcec7",null),(0,s.A)(v,"60cbae570723b9aa85f8042c3464b764b39e619deb",null),(0,s.A)(z,"70947a5b5b8fa09282460237061ca18dba05135380",null),(0,s.A)(N,"0094d3046b96488141886298814fd70eb4743d5a50",null)},87021:(e,a,t)=>{t.d(a,{$:()=>o});var r=t(45512),s=t(58009),n=t(12705),i=t(21643),c=t(59462),d=t(6766);let l=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md active:translate-y-[1px] text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 disabled:bg-gray-500",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-primary text-primary bg-transparent hover:bg-secondary",secondary:"bg-secondary text-primary hover:bg-secondary/50",ghost:"hover:bg-secondary hover:text-secondary-foreground",link:"text-primary underline-offset-4 hover:underline",succes:"bg-green-600 text-destructive-foreground hover:bg-destructive/90"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef(({className:e,variant:a,size:t,asChild:s=!1,children:i,disabled:o,loading:f,...u},b)=>{let m=s?n.DX:"button";return(0,r.jsx)(m,{disabled:o||f,className:(0,c.cn)(l({variant:a,size:t,className:e})),ref:b,...u,children:f?(0,r.jsx)(d.A,{className:"w-5 h-5 animate-spin"}):i})});o.displayName="Button"},47699:(e,a,t)=>{t.d(a,{J:()=>l});var r=t(45512),s=t(58009),n=t(92405),i=t(21643),c=t(59462);let d=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=s.forwardRef(({className:e,...a},t)=>(0,r.jsx)(n.b,{ref:t,className:(0,c.cn)(d(),e),...a}));l.displayName=n.b.displayName},40530:(e,a,t)=>{t.d(a,{q:()=>o});var r=t(21590);t(70376);var s=t(24118),n=t.n(s),i=t(24871),c=t(70709),d=t(8805);let l={providers:[(0,i.A)({name:"Credentials",credentials:{email:{label:"Email",type:"text"},password:{label:"Password",type:"password"}},async authorize(e){if(!e)return null;let a={email:e.email},t=await c.z.user.findFirst({where:a});return t&&await (0,d.compare)(e.password,t.password)?{id:t.id,email:t.email,name:t.firstName,role:t.role}:null}})],secret:process.env.NEXTAUTH_SECRET,session:{strategy:"jwt"},callbacks:{async signIn({user:e,account:a}){try{if(a?.provider==="credentials")return!0;if(!e?.email)return!1;return!!await c.z.user.findFirst({where:{email:e.email}})}catch(e){console.log("Error [SIGN IN]",e)}return!1},async jwt({token:e}){if(!e.email)return e;let a=await c.z.user.findFirst({where:{email:e.email}});return a&&(e.id=a.id,e.email=a.email,e.name=a.firstName,e.role=a.role),e},session:({session:e,token:a})=>(e?.user&&(e.user.id=a.id,e.user.role=a.role),e)}};async function o(){let e=await (0,s.getServerSession)(l);if(e?.user)return await c.z.user.findFirst({where:{id:e.user.id}})}n()(l),(0,t(99344).D)([o]),(0,r.A)(o,"0073f5af6c1f6ac2579605cfb8d6b91f63e67bd6b0",null)},70709:(e,a,t)=>{t.d(a,{z:()=>s});var r=t(96330);let s=globalThis.prismaGlobal??new r.PrismaClient}};